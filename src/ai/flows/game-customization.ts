// This is an autogenerated file from Firebase Studio.
'use server';

/**
 * @fileOverview A flow to adjust the difficulty level of a game based on vocabulary level.
 *
 * - customizeGameDifficulty - A function that handles the game difficulty customization process.
 * - CustomizeGameDifficultyInput - The input type for the customizeGameDifficulty function.
 * - CustomizeGameDifficultyOutput - The return type for the customizeGameDifficulty function.
 */

import {ai} from '@/ai/genkit';
import {z} from 'genkit';

const CustomizeGameDifficultyInputSchema = z.object({
  documentText: z.string().describe('The text content of the uploaded document.'),
  gameType: z.string().describe('The type of game to customize (e.g., Wordscapes, Drops).'),
  desiredDifficulty: z
    .enum(['easy', 'medium', 'hard'])
    .describe('The desired difficulty level for the game.'),
});
export type CustomizeGameDifficultyInput = z.infer<
  typeof CustomizeGameDifficultyInputSchema
>;

const CustomizeGameDifficultyOutputSchema = z.object({
  customizedParameters: z
    .string()
    .describe(
      'The customized game parameters based on the vocabulary level and desired difficulty.'
    ),
});
export type CustomizeGameDifficultyOutput = z.infer<
  typeof CustomizeGameDifficultyOutputSchema
>;

export async function customizeGameDifficulty(
  input: CustomizeGameDifficultyInput
): Promise<CustomizeGameDifficultyOutput> {
  return customizeGameDifficultyFlow(input);
}

const prompt = ai.definePrompt({
  name: 'customizeGameDifficultyPrompt',
  input: {schema: CustomizeGameDifficultyInputSchema},
  output: {schema: CustomizeGameDifficultyOutputSchema},
  prompt: `You are a game customization expert. A user has uploaded a document and wants to customize the difficulty of a game based on the document's vocabulary.

Document Text: {{{documentText}}}
Game Type: {{{gameType}}}
Desired Difficulty: {{{desiredDifficulty}}}

Analyze the document text to determine its vocabulary level. Based on the vocabulary level and the desired difficulty, suggest customized game parameters. The customized parameters should be appropriate to be directly used by the game.
For example, parameters can include things such as what words to include in the game, what minimum word lengths should be, how much time the player gets, whether to give hints, etc.

Return these customized parameters in the 'customizedParameters' field.`,
});

const customizeGameDifficultyFlow = ai.defineFlow(
  {
    name: 'customizeGameDifficultyFlow',
    inputSchema: CustomizeGameDifficultyInputSchema,
    outputSchema: CustomizeGameDifficultyOutputSchema,
  },
  async input => {
    const {output} = await prompt(input);
    return output!;
  }
);
